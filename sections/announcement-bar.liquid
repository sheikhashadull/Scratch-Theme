{% liquid
  assign checkbox = section.settings.enable_bar
  assign paddingx = section.settings.paddingx
  assign gap = section.settings.gap

  assign alignment = section.settings.alignment
%}



<section class="{{ section.id }} color-{{ section.settings.color_scheme }} gradient">
    <div class="announcement-bar">
        {% content_for 'blocks' %}
    </div>
</section>


<style>
    .{{ section.id }} .announcement-bar{
        display: flex;
        align-items: center;
        justify-content: {{ alignment }};
        gap: {{ gap }}px;
        padding: {{ paddingx }}px 0;
        white-space: nowrap;

    }

    {% if checkbox == true %}
      .{{ section.id }} .announcement-bar {
        animation: scrolling 30s linear infinite;
    }
    @keyframes scrolling {
        0% {transform: translateX(0%);}
        100% {transform: translateX(-100%);}
    }
    {% endif %}

</style>

{% schema %}
    {
        "name": "Announcement Bar",
        "limit": 1,
        "enabled_on": {
            "groups": ["header"]
        },
        "blocks": [
            {
                "type": "@theme"
            }
        ],
        "settings": [
            {
                "type": "checkbox",
                "id": "enable_bar",
                "label": "Enable Announcement Bar",
                "default": true
            },
            {
                "type": "range",
                "id": "paddingx",
                "label": "Header PaddingX",
                "min": 10,
                "max": 120,
                "default": 10,
                "step": 10,
                "unit": "px"
            },
            {
                "type": "range",
                "id": "gap",
                "label": "Gap",
                "min": 10,
                "max": 120,
                "default": 10,
                "step": 10,
                "unit": "px"
            },
            {
                "type": "select",
                "id": "alignment",
                "label": "Alignment",
                "default": "center",
                "options": [
                    { "value": "flex-start", "label": "Left"},
                    { "value": "center", "label": "Center"},
                    { "value": "flex-end", "label": "Right"}
                ]
            },
            {
                "type": "header",
                "content": "Announcement Bar Style"
            },
            {
                "type": "color_scheme",
                "id": "color_scheme",
                "label": "Color Scheme"
            },
        ],
        "presets": [
            {
                "name": "Announcement Bar"
            }
        ]
    }
{% endschema %}